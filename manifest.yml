---
applications:
  - name: appdnozzle
    buildpack: https://github.com/cloudfoundry/go-buildpack.git
    health-check-type: process
    env:
      GOVERSION: go1.8
      NOZZLE_UAA_URL: "https://uaa.<domain>"  # cf curl /v2/info | jq .doppler_logging_endpoint
      NOZZLE_TRAFFIC_CONTROLLER_URL: "wss://doppler.<domain>:<port>" # cf curl /v2/info | jq .token_endpoint
      NOZZLE_USERNAME: opentsdb-firehose-nozzle
      NOZZLE_PASSWORD: <opentsb password>
      NOZZLE_FIREHOSE_SUBSCRIPTION_ID: appdynamics.firehose
      NOZZLE_SKIP_SSL: true
      NOZZLE_SELECTED_EVENTS: ValueMetric
      APPD_SINK: Controller # one of the following stdout|machineagent(Not Implemented)|controller etc...
      APPD_SAMPLING_RATE: 2 
      APPD_CONTROLLER_HOST: <controller>
      APPD_ACCESS_KEY: <accesskey>
      APPD_CONTROLLER_PORT: <port>
      APPD_ACCOUNT: <account>
      LD_LIBRARY_PATH: /app/vendor/appdynamics/lib
